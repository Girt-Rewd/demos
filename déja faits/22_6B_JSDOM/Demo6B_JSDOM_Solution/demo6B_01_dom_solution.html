<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <title>Démo 6B, #01</title>
  <script>
    // Fonction qui alterne la photo du moyen de transport entre l'avion et le bateau
    // et change le texte du paragraphe au-dessous
    function changerPhoto() {
      var image = document.getElementById("photoTransport");
      var source = image.src;
      // interchanger l'image et le contenu du paragraphe
      if (source.indexOf("bateau.jpg") >= 0) {
        image.src = source.replace("bateau.jpg", "avion.jpg");
        document.getElementById("moyenTransport").innerHTML = document
          .getElementById("moyenTransport")
          .innerHTML.replace("Bateau", "Avion");
      } else {
        image.src = source.replace("avion.jpg", "bateau.jpg");
        document.getElementById("moyenTransport").innerHTML = document
          .getElementById("moyenTransport")
          .innerHTML.replace("Avion", "Bateau");
      }
    }
    //obtenir la liste de tous les attributs d'un élément,
    //et en connaitre leur nom et valeur.
    // Fonction qui affiche les attributs de l'image du moyen de transport
    function afficherAttributs() {
      var tabAttributs = document.getElementById("photoTransport").attributes;
      var message = "TOUS LES ATTRIBUTS DE LA PHOTO H2#\n================\n";
      var objet = null;
      for (var i = 0; i < tabAttributs.length; i++) {
        message =
          message + tabAttributs[i].name + ":" + tabAttributs[i].value + "\n";
      }
      alert(message);
    }

    // Fonction qui affiche le contenu de tous les h2
    function afficherH2() {
      var tabH2 = document.getElementsByTagName("h2");
      var message = "TOUS LES TITRES H2#\n================\n";
      var objet = null;
      for (var i = 0; i < tabH2.length; i++) {
        message = message + tabH2[i].innerHTML + "\n";
      }
      alert(message);
    }

    // Fonction qui affiche le contenu de la barre d'adresse
    //window.location : la barre d'adresse
    function afficherAdresse() {
      alert(window.location);
    }

    // Fonction qui change la dimension des photos d'animaux
    function changerDimensions(facteur) {
      //toutes les balises de la classe imagesAnimaux
      var tabImages = document.getElementsByClassName("imagesAnimaux");
      for (var i = 0; i < tabImages.length; i++) {
        var hauteur = Number(tabImages[i].height);
        hauteur = hauteur * facteur;
        tabImages[i].height = String(hauteur);
      }
    }

    // Fonction qui change le compteur
    function additionnerCompteur(ajout) {
      var tabH2 = document.getElementsByTagName("h2");
      // on cherche le dernier h2
      var titreCompteur = tabH2[tabH2.length - 1];
      //recupération/ affichage sous forme HTML
      var contenu = titreCompteur.innerHTML;
      // on cherche les deux points du Compteur:6, par defaut on a 6
      var indice = contenu.indexOf(":");
      //extraire une sous chaine à partir de l'indice +1 jusqu'à la fin
      var nombre = Number(contenu.substring(indice + 1, indice.length));
      // incrementer le nombre
      nombre += ajout;
      //remplacer le titre par la nouvelle modification
      titreCompteur.innerHTML = "Compteur:" + nombre;
    }
  </script>
</head>

<body onload="fct();">
  <h1>Démo 4B #01</h1>

  <h2>Moyen de transport</h2>
  <img onclick="changerPhoto();" id="photoTransport" alt="transport" src="images/bateau.jpg" height="100" />
  <p id="moyenTransport">Moyen de transport : Bateau</p>

  <h2>Affichages ...</h2>
  <input onclick="afficherAttributs();" type="button" value="Afficher attributs photo" />
  <br />
  <input onclick="afficherH2();" type="button" value="Afficher h2s contenu" />
  <br />
  <input onclick="afficherAdresse();" type="button" value="Afficher l'adresse" />

  <h2>Animaux</h2>
  <img class="imagesAnimaux" alt="pinguoin" src="images/pinguoin.jpg" height="100" />
  <img class="imagesAnimaux" alt="girafe" src="images/girafe.jpg" height="100" />
  <br />
  <input onclick="changerDimensions(2.0);" type="button" value="Agrandir" />
  <input onclick="changerDimensions(0.5);" type="button" value="Rapetisser" />

  <h2>Compteur:6</h2>
  <input onclick="additionnerCompteur(1);" type="button" value="+" />
  <input onclick="additionnerCompteur(-1);" type="button" value="-" />
</body>

</html>